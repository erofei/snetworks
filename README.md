## snetworks

snetworks - инструмент для сканирования подсетей на наличие в них активных хостов

Скрипт позволяет проверить любую подсеть на наличие в ней активных хостов. Может быть он или какая-то его часть будут кому-то полезны. Не знаю, возможно аналогичные инструменты уже есть. Но сам не встречал.

Для работы скрипта требуется установить:
```
sudo apt-get install nmap 
pip install python-nmap
```

### Краткое описание:

С точки зрения скрипта подсети будут разделяются на свободные/занятые.
Метод для сканирования занятых и свободных подсетей используется один - утилита nmap.

Отличия заключаются в выводе результата + алгоритм сканирования занятых подсетей позволяет
получить положительный результат даже если на устройстве закрыт icmp.

Запустить snetworks можно двумя способами: с аргументами и без.

Если запускаем с аргументами, по умолчанию используется алгоритм сканирования свободных подсетей на наличие в них активных хостов.
Результат выводится только на экран. При запуске можно указать несколько подсетей через пробел.

* Максимально допустимое количество одновременно проверяемых подсетей - 50.
* Формат указываемой подсети: ip/mask - без пробелов. Максимально допустимая для проверки подсеть - /20.

Если запустить snetworks без аргументов, он вступит с Вами в диалог.
К каждому шагу в диалоге даны комментарии на русском языке.
Если они отображаются некорректно, поменяйте кодировку в вашем клиенте на utf-8. 

В диалоге Вы можете выбрать:
 - какие подсети собираетесь проверять: свободные/занятые;
 - указать проверяемые подсети;
 - записать результат в файл, указав его имя (файл будет автоматически создан в вашей домашней директории);
 - вывести результат на экран.

В списке проверяемых подсетей так же можно указывать файл, с перечисленными в нем через пробелы или с новой строки подсетями.
Файл должен находиться в вашей домашней директории.

В выводе результата может встретиться строчка: "используется, но требуется проверить".

Что означает эта строчка?
Это значит, что в подсети есть активные хосты, но недоступен шлюз (первый адрес подсети)
Причин для этого может быть не одна, поэтому статусу подсети дается такая формулировка.


__Проверка свободных подсетей опирается только на icmp, если он закрыт, мы не увидим такие хосты в активных.__

В алгоритме проверки занятых подсетей кроме icmp еще используется сканирование нескольких tcp портов: 21,22,23,80,3389.
Поэтому, чтобы быть на 100% уверенными, что в проверяемой подсети никого нет, можно использовать второй способ.

Чтобы сканирование портов было доступно, скрипт должен запускаться с правами root.
Лучше всего всегда запускать скрипт с правами root, так как iсmp, в таком случае,
будет так же проверяться с использование icmp порта а не icmp запроса, что ускорит выполнение работы скрипта.

Можно было, конечно, и не разделять алгоритм сканирования на свободные/занятые,
использовать для всех случаев алгоритм с участием tcp портов. Тогда объем кода был бы на порядок меньше.
Но в таком случае, если даже начать сканировать подсеть /24, в которой нет активных хостов,
время работы скрипта значительно увеличивается.
